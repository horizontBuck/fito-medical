<section class="patient-header">
  <div class="profile-header-container flex-center position-relative w-100">
    <!-- üñºÔ∏è Avatar del paciente -->
    <img
      [src]="auth.getAvatarUrl(paciente)"
      class="profile-avatar shadow-lg"
      [alt]="'Foto de perfil de ' + (paciente?.name || 'paciente')"
    />

    <!-- üîò Controles superiores -->
    <div class="header-controls position-absolute w-100 d-flex justify-content-between align-items-center">
      <a (click)="goBack()" class="icon-btn flex-center" title="Volver">
        <i class="ph ph-caret-left"></i>
      </a>

      <div class="right-controls d-flex align-items-center gap-3">
        <a (click)="edit()" class="icon-btn flex-center" title="Editar">
          <i class="ph ph-pencil-simple-line"></i>
        </a>
        <button (click)="navigateToSettings()" class="icon-btn flex-center" title="Ajustes">
          <i class="ph ph-gear"></i>
        </button>
      </div>
    </div>
  </div>
  <div class="bottom-header text-center">
    <h2 class="fw-bold">{{ paciente?.name }}</h2>
    <p class="email text-muted">{{ paciente?.email }}</p>
  </div>
</section>


<div class="patient-profile-bottom">
  

  <!-- üìã Datos personales -->
  <div class="patient-card mt-4">
    <div class="row">
    <div class="col-6 info-row">
      <i class="ph ph-user"></i>
      <div>
        <p>G√©nero</p>
        <p class="fw-bold">{{ paciente?.gender || 'No especificado' }}</p>
      </div>
    </div>

    <div class="col-6 info-row">
      <i class="ph ph-calendar-blank"></i>
      <div>
        <p>Fecha Nacimiento</p>
        <p class="fw-bold">
          {{ paciente?.birthDate ? (paciente.birthDate | date:'dd/MM/yyyy') : 'No registrada' }}
        </p>     
      </div>
    </div>

    <div class="col-6 info-row">
      <i class="ph ph-phone"></i>
      <div>
        <p>Tel√©fono</p>
        <p class="fw-bold">{{ paciente?.phone || 'No registrado' }}</p>
      </div>
    </div>

    <div class="col-6 info-row">
      <i class="ph ph-identification-card"></i>
      <div>
        <p>RUT</p>
        <p class="fw-bold">{{ paciente?.rut || 'No registrado' }}</p>
      </div>
    </div>
    </div>
  </div>

  <!-- ü©∫ Ficha m√©dica -->
  <div class="doctor-about mt-5">
    <h3 class="fw-bold mb-3">Ficha M√©dica</h3>
    <div class="medical-info">
      <p><i class="ph ph-clipboard-text"></i> <strong>Historia:</strong> {{ paciente?.medicalHistory || 'Sin registros' }}</p>
      <p><i class="ph ph-pill"></i> <strong>Alergias:</strong> {{ paciente?.allergies || 'No registradas' }}</p>
      <p><i class="ph ph-stethoscope"></i> <strong>Medicamentos:</strong> {{ paciente?.medications || 'No registrados' }}</p>
      <p><i class="ph ph-activity"></i> <strong>√öltima cita:</strong> {{ paciente?.lastAppointment ? (paciente.lastAppointment | date:'dd/MM/yyyy') : 'N/A' }}</p>
    </div>
  </div>

  <!-- üìÖ Acci√≥n -->
  <div class="d-flex flex-column gap-8 mt-5">
    <a class="link-button d-block text-center" routerLink="/appointments/new">
      Agendar nueva cita
    </a>
  </div>
</div>
